<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MathFlow ‚Äî Dashboard</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">

  <!-- Tailwind Play CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#8b5cf6',
            accent: '#06b6d4',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            bgLight: '#fafafa',
            cardLight: '#ffffff',
            bgDark: '#0f0f0f',
            cardDark: '#1a1a1a',
            textPrimaryLight: '#111827',
            textPrimaryDark: '#f9fafb',
          },
          borderRadius: { 'card': '8px', 'btn': '6px' }
        },
        fontFamily: {
          sans: ['Inter', 'ui-sans-serif', 'system-ui'],
          heading: ['Space Grotesk', 'Inter', 'ui-sans-serif']
        }
      },
      safelist: [
        'bg-primary', 'bg-secondary', 'bg-accent', 'bg-success', 'bg-warning', 'bg-error',
        'text-primary', 'text-secondary', 'text-accent', 'text-success', 'text-warning', 'text-error',
        'from-primary', 'to-secondary', 'from-secondary', 'to-accent',
      ]
    }
  </script>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="antialiased bg-bgLight dark:bg-bgDark text-textPrimaryLight dark:text-textPrimaryDark" data-theme="light">
  <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 focus:bg-white focus:px-3 focus:py-2 focus:rounded-md">Skip to content</a>

  <!-- Navigation -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/80 dark:bg-black/80 border-b border-gray-100 dark:border-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 items-center justify-between">
        <div class="flex items-center gap-4">
          <a href="index.html" class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-heading font-bold">M</div>
            <div class="hidden sm:block">
              <span class="block font-heading text-lg text-gray-900 dark:text-white">MathFlow</span>
              <span class="text-sm text-gray-500 dark:text-white">Design to Learn</span>
            </div>
          </a>
          <nav class="hidden md:flex gap-2 ml-6" aria-label="Primary">
            <a href="index.html" class="px-3 py-2 text-sm rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">Home</a>
            <a href="schedule.html" class="px-3 py-2 text-sm rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">Schedule</a>
            <a href="ai-tutor.html" class="px-3 py-2 text-sm rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">AI Tutor</a>
            <a href="learn.html" class="px-3 py-2 text-sm rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">Learn</a>
            <a href="resources.html" class="px-3 py-2 text-sm rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">Resources</a>
            <a href="community.html" class="px-3 py-2 text-sm rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">Community</a>
            <a href="dashboard.html" class="px-3 py-2 text-sm rounded-md bg-gray-100 dark:bg-gray-800 text-primary">Dashboard</a>
          </nav>
        </div>
        <div class="flex items-center gap-3">
          <button id="themeToggle" class="p-2 rounded-md" aria-pressed="false" title="Toggle theme">
            <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.66-10.66h-1M4.34 12.34h-1M18.36 18.36l-.7-.7M6.34 6.34l-.7-.7M18.36 5.64l-.7.7M6.34 17.66l-.7.7M12 8a4 4 0 100 8 4 4 0 000-8z" />
            </svg>
          </button>
          <button type="button" id="editProfile" class="flex items-center gap-2 px-3 py-1.5 rounded-btn border border-gray-200 dark:border-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:border-primary hover:text-primary transition">
            <span id="userInitials" class="w-6 h-6 rounded-full bg-gradient-to-br from-primary to-secondary text-white text-xs flex items-center justify-center font-semibold">?</span>
            <span id="profileName" class="hidden sm:block">Student</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main id="main" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <!-- Welcome Banner -->
    <div class="bg-gradient-to-r from-primary via-secondary to-accent rounded-2xl p-8 mb-8 shadow-2xl text-white">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-white/70 text-sm font-medium uppercase tracking-widest mb-1" id="timeGreeting">Good morning</p>
          <h1 class="text-4xl font-heading font-bold mb-2">Welcome back, <span id="userName">Student</span>!</h1>
          <p class="text-white/80 text-lg">Here's a snapshot of your learning progress today.</p>
        </div>
      </div>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">

      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-5 group hover:scale-[1.02] transition-all duration-200">
        <div class="flex items-center justify-between mb-4">

          <span class="text-xs font-medium text-primary bg-primary/10 px-2 py-0.5 rounded-full">Today</span>
        </div>
        <div class="text-3xl font-heading font-bold text-gray-900 dark:text-white mb-1" id="timeDisplay">0.0h</div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Time Spent</div>
        <div class="text-xs text-gray-400 mt-0.5">Auto-tracking active time</div>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-5 group hover:scale-[1.02] transition-all duration-200">
        <div class="flex items-center justify-between mb-4">

          <span class="text-xs font-medium text-warning bg-warning/10 px-2 py-0.5 rounded-full">Streak</span>
        </div>
        <div class="text-3xl font-heading font-bold text-gray-900 dark:text-white mb-1" id="streakDisplay">0</div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Day Streak</div>
        <div class="text-xs text-gray-400 mt-0.5">Keep it going!</div>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-5 group hover:scale-[1.02] transition-all duration-200">
        <div class="flex items-center justify-between mb-4">

          <span class="text-xs font-medium text-accent bg-accent/10 px-2 py-0.5 rounded-full">Total</span>
        </div>
        <div class="text-3xl font-heading font-bold text-gray-900 dark:text-white mb-1" id="sessionsDisplay">0</div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Sessions Done</div>
        <div class="text-xs text-gray-400 mt-0.5">Study sessions</div>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-5 group hover:scale-[1.02] transition-all duration-200">
        <div class="flex items-center justify-between mb-4">

          <span class="text-xs font-medium text-success bg-success/10 px-2 py-0.5 rounded-full">Points</span>
        </div>
        <div class="text-3xl font-heading font-bold text-gray-900 dark:text-white mb-1" id="pointsDisplay">0</div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Total Points</div>
        <div class="text-xs text-gray-400 mt-0.5">Earn by learning</div>
      </div>

    </div>

    <!-- Music Player -->
    <div class="bg-gradient-to-r from-secondary to-primary rounded-2xl p-6 mb-8 text-white shadow-2xl">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center text-2xl">üéµ</div>
          <div>
            <h3 class="font-heading font-semibold text-lg">Lofi Study Beats</h3>
            <p class="text-white/70 text-sm" id="currentTrack">Focus music to help you study</p>
          </div>
        </div>
        <button type="button" id="musicToggle" class="flex items-center gap-2 px-5 py-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition font-semibold text-sm">
          <svg id="musicIcon" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span id="musicStatus">Play</span>
        </button>
      </div>
      <div id="musicPlayer" class="hidden mt-4">
        <div class="flex items-center gap-3">
          <svg class="w-4 h-4 text-white/60 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M12 6a7 7 0 010 12M8.464 15.536a5 5 0 010-7.072"/>
          </svg>
          <input type="range" id="volumeSlider" min="0" max="100" value="50" class="flex-1 h-1.5 bg-white/30 rounded-full appearance-none cursor-pointer accent-white" aria-label="Volume">
          <svg class="w-4 h-4 text-white/60 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M12 6v12M8.464 8.464a5 5 0 000 7.072"/>
          </svg>
        </div>
      </div>
      <audio id="lofiAudio" loop>
        <source src="https://stream.zeno.fm/f3wvbbqmdg8uv" type="audio/mpeg">
      </audio>
    </div>

    <!-- Two Column Layout -->
    <div class="grid lg:grid-cols-3 gap-6">

      <!-- Left: Actions & Activity -->
      <div class="lg:col-span-2 space-y-6">

        <!-- Quick Actions -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-6">
          <h2 class="text-lg font-heading font-semibold text-gray-900 dark:text-white mb-5">Quick Actions</h2>
          <div class="grid sm:grid-cols-2 gap-3">

            <a href="learn.html" class="flex items-center gap-4 p-4 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-primary hover:bg-primary/5 dark:hover:bg-primary/10 transition-all duration-200 group">

              <div>
                <div class="font-semibold text-gray-900 dark:text-white text-sm">AI Learn</div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Generate practice questions</div>
              </div>
            </a>

            <a href="schedule.html" class="flex items-center gap-4 p-4 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-secondary hover:bg-secondary/5 dark:hover:bg-secondary/10 transition-all duration-200 group">

              <div>
                <div class="font-semibold text-gray-900 dark:text-white text-sm">Schedule</div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Book study sessions</div>
              </div>
            </a>

            <a href="resources.html" class="flex items-center gap-4 p-4 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-success hover:bg-success/5 dark:hover:bg-success/10 transition-all duration-200 group">

              <div>
                <div class="font-semibold text-gray-900 dark:text-white text-sm">Resources</div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Cheat sheets & calculators</div>
              </div>
            </a>

            <a href="community.html" class="flex items-center gap-4 p-4 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-warning hover:bg-warning/5 dark:hover:bg-warning/10 transition-all duration-200 group">

              <div>
                <div class="font-semibold text-gray-900 dark:text-white text-sm">Community</div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Connect & get help</div>
              </div>
            </a>

          </div>
        </div>

        <!-- Activity Chart -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-6">
          <div class="flex items-center justify-between mb-5">
            <h2 class="text-lg font-heading font-semibold text-gray-900 dark:text-white">Activity Overview</h2>
            <div class="flex gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1 text-xs">
              <button id="chartView7d"  class="px-2.5 py-1 rounded-md bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm font-medium transition" onclick="setChartRange(7)">7d</button>
              <button id="chartView14d" class="px-2.5 py-1 rounded-md text-gray-500 dark:text-gray-400 font-medium transition hover:text-gray-700 dark:hover:text-gray-200" onclick="setChartRange(14)">14d</button>
              <button id="chartView30d" class="px-2.5 py-1 rounded-md text-gray-500 dark:text-gray-400 font-medium transition hover:text-gray-700 dark:hover:text-gray-200" onclick="setChartRange(30)">30d</button>
            </div>
          </div>

          <!-- Summary pills -->
          <div class="grid grid-cols-3 gap-3 mb-5">
            <div class="bg-primary/5 dark:bg-primary/10 rounded-xl p-3 text-center">
              <div class="text-xl font-bold text-primary" id="chartTotalActivities">0</div>
              <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Total Activities</div>
            </div>
            <div class="bg-success/5 dark:bg-success/10 rounded-xl p-3 text-center">
              <div class="text-xl font-bold text-success" id="chartActiveDays">0</div>
              <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Active Days</div>
            </div>
            <div class="bg-warning/5 dark:bg-warning/10 rounded-xl p-3 text-center">
              <div class="text-xl font-bold text-warning" id="chartBestDay">‚Äî</div>
              <div class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Best Day</div>
            </div>
          </div>

          <!-- Chart canvas -->
          <div class="relative" style="height:210px" id="activityChartWrap">
            <canvas id="activityChart"></canvas>
            <div id="chartEmptyState" class="absolute inset-0 flex flex-col items-center justify-center text-gray-400">
              <svg class="w-10 h-10 mb-2 opacity-40" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              <p class="text-sm font-medium">No activity yet</p>
              <p class="text-xs mt-1 opacity-70">Start studying to see your progress</p>
            </div>
          </div>

          <!-- Type legend -->
          <div class="flex flex-wrap gap-3 mt-4 pt-4 border-t border-gray-100 dark:border-gray-700" id="activityLegend"></div>
        </div>

      </div>

      <!-- Right: Profile, Achievements, Settings -->
      <div class="space-y-6">

        <!-- Profile Card -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-6">
          <div class="flex items-center gap-4 mb-5">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-2xl font-heading font-bold shadow-lg shadow-primary/25">
              <span id="profileInitials">?</span>
            </div>
            <div>
              <div class="font-heading font-semibold text-lg text-gray-900 dark:text-white" id="profileDisplayName">Student</div>
              <div class="text-sm text-gray-500 dark:text-gray-400">MathFlow Member</div>
            </div>
          </div>
          <button type="button" id="editProfileBtn" class="w-full py-2.5 px-4 rounded-xl border border-gray-200 dark:border-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:border-primary hover:text-primary dark:hover:border-primary dark:hover:text-primary transition">
            Edit Profile
          </button>
        </div>

        <!-- Achievements -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-6">
          <h3 class="font-heading font-semibold text-gray-900 dark:text-white mb-4">Achievements</h3>
          <div class="grid grid-cols-3 gap-2">
            <div class="p-3 rounded-xl bg-warning/10 text-center border border-warning/20">
              <div class="text-2xl mb-1">üèÜ</div>
              <div class="text-xs font-medium text-gray-700 dark:text-gray-300">First Steps</div>
            </div>
            <div class="p-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-center opacity-40">
              <div class="text-2xl mb-1">üî•</div>
              <div class="text-xs font-medium text-gray-700 dark:text-gray-300">7-Day Streak</div>
            </div>
            <div class="p-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-center opacity-40">
              <div class="text-2xl mb-1">‚≠ê</div>
              <div class="text-xs font-medium text-gray-700 dark:text-gray-300">100 Points</div>
            </div>
          </div>
        </div>

        <!-- Settings -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-800 p-6">
          <h3 class="font-heading font-semibold text-gray-900 dark:text-white mb-4">Settings</h3>
          <div class="space-y-1">
            <button type="button" id="dyslexicToggle" aria-pressed="false" onclick="toggleDyslexicFont()" class="w-full text-left px-3 py-2.5 rounded-xl text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition flex items-center justify-between">
              <span>Dyslexic-Friendly Font</span>
              <span id="dyslexicBadge" class="text-xs px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400">Off</span>
            </button>
            <button type="button" id="changePasswordBtn" class="w-full text-left px-3 py-2.5 rounded-xl text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              Change Password
            </button>
            <button type="button" id="resetStats" class="w-full text-left px-3 py-2.5 rounded-xl text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              Reset Statistics
            </button>
            <button type="button" id="clearData" class="w-full text-left px-3 py-2.5 rounded-xl text-sm text-error hover:bg-error/10 transition">
              Clear All Data
            </button>
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- Edit Profile Modal -->
  <div id="profileModal" class="hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
    <div class="bg-cardLight dark:bg-cardDark rounded-2xl shadow-2xl p-6 max-w-md w-full">
      <div class="flex items-center justify-between mb-5">
        <h3 class="text-xl font-heading font-semibold text-gray-900 dark:text-white">Edit Profile</h3>
        <button type="button" id="cancelProfile" class="p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 hover:text-gray-700 transition">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="space-y-4">
        <div>
          <label for="nameInput" class="block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300">Name</label>
          <input type="text" id="nameInput" placeholder="Enter your name" class="w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition">
        </div>
        <div>
          <label for="initialsInput" class="block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300">Initials</label>
          <input type="text" id="initialsInput" placeholder="e.g., JS" maxlength="2" class="w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition">
        </div>
        <div class="flex gap-3 pt-1">
          <button type="button" id="saveProfile" class="flex-1 py-2.5 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold hover:opacity-90 transition">
            Save Changes
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Change Password Modal -->
  <div id="passwordModal" class="hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
    <div class="bg-cardLight dark:bg-cardDark rounded-2xl shadow-2xl p-6 max-w-md w-full">
      <div class="flex items-center justify-between mb-5">
        <h3 class="text-xl font-heading font-semibold text-gray-900 dark:text-white">Change Password</h3>
        <button type="button" id="cancelPassword" class="p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 hover:text-gray-700 transition">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="space-y-4">
        <div>
          <label for="currentPasswordInput" class="block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300">Current Password</label>
          <input type="password" id="currentPasswordInput" placeholder="Enter current password" class="w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition">
        </div>
        <div>
          <label for="newPasswordInput" class="block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300">New Password</label>
          <input type="password" id="newPasswordInput" placeholder="Enter new password (min 6 chars)" class="w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition">
        </div>
        <div>
          <label for="confirmPasswordInput" class="block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300">Confirm New Password</label>
          <input type="password" id="confirmPasswordInput" placeholder="Repeat new password" class="w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition">
        </div>
        <p id="passwordError" class="text-sm text-error hidden"></p>
        <div class="flex gap-3 pt-1">
          <button type="button" id="savePassword" class="flex-1 py-2.5 bg-gradient-to-r from-primary to-secondary text-white rounded-xl font-semibold hover:opacity-90 transition">
            Update Password
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="mt-12 border-t border-gray-100 dark:border-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-md bg-gradient-to-br from-primary to-secondary text-white flex items-center justify-center font-heading font-bold">M</div>
        <div>
          <div class="font-medium text-gray-900 dark:text-white">MathFlow</div>
          <div class="text-xs text-gray-500">Made by students, for students</div>
        </div>
      </div>
      <div class="text-sm text-gray-500">&copy; <span id="year"></span> MathFlow. All rights reserved.</div>
      <div class="flex items-center gap-3">
        <a href="#" class="text-gray-500 text-sm hover:text-primary">Privacy</a>
        <a href="#" class="text-gray-500 text-sm hover:text-primary">Terms</a>
      </div>
    </div>
  </footer>

  <script src="shared.js"></script>
  <script>requireAuth();</script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // ---- Theme Toggle ----
    const themeToggle = document.getElementById('themeToggle');
    const htmlEl = document.documentElement;
    const bodyEl = document.body;
    let theme = localStorage.getItem('mf_theme') || 'light';

    function setTheme(t) {
      bodyEl.setAttribute('data-theme', t);
      if (t === 'dark') {
        bodyEl.classList.add('dark');
        htmlEl.classList.add('dark');
        document.getElementById('themeIcon').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />';
        themeToggle.setAttribute('aria-pressed', 'true');
      } else {
        bodyEl.classList.remove('dark');
        htmlEl.classList.remove('dark');
        document.getElementById('themeIcon').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.66-10.66h-1M4.34 12.34h-1M18.36 18.36l-.7-.7M6.34 6.34l-.7-.7M18.36 5.64l-.7.7M6.34 17.66l-.7.7M12 8a4 4 0 100 8 4 4 0 000-8z" />';
        themeToggle.setAttribute('aria-pressed', 'false');
      }
      localStorage.setItem('mf_theme', t);
    }

    setTheme(theme);
    themeToggle.addEventListener('click', () => {
      setTheme(bodyEl.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
      if (activityChart) renderActivity();
    });
    themeToggle.dataset.mfInited = '1';

    // ---- Time-based greeting ----
    const hour = new Date().getHours();
    const greeting = hour < 12 ? 'Good morning' : hour < 17 ? 'Good afternoon' : 'Good evening';
    document.getElementById('timeGreeting').textContent = greeting;

    // ---- Storage keys ----
    const _dashEmail = localStorage.getItem('mf_currentUser') || 'guest';
    const KEYS = {
      profile: `mf_profile_${_dashEmail}`,
      time: `mf_total_seconds_${_dashEmail}`,
      streak: `mf_streak_${_dashEmail}`,
      sessions: `mf_sessions_${_dashEmail}`,
      points: `mf_points_${_dashEmail}`,
      activity: `mf_activity_${_dashEmail}`
    };

    // ---- State ----
    const _accts = JSON.parse(localStorage.getItem('mf_accounts') || '[]');
    const _acct = _accts.find(a => a.email === _dashEmail) || {};
    const _defaultInitials = (_acct.name || 'ST').split(' ').map(w => w[0]).join('').slice(0, 2).toUpperCase();
    const _defaultProfile = JSON.stringify({ name: _acct.name || 'Student', initials: _defaultInitials });
    let profile = JSON.parse(localStorage.getItem(KEYS.profile) || _defaultProfile);
    let totalSeconds = parseInt(localStorage.getItem(KEYS.time) || '0');
    let streak = JSON.parse(localStorage.getItem(KEYS.streak) || '{"count":0,"lastDate":""}');
    let sessions = parseInt(localStorage.getItem(KEYS.sessions) || '0');
    let points = parseInt(localStorage.getItem(KEYS.points) || '0');
    let activity = JSON.parse(localStorage.getItem(KEYS.activity) || '[]');

    // ---- Time tracking ----
    let lastActivity = Date.now();
    let isActive = true;

    function updateTime() {
      if (isActive) {
        totalSeconds++;
        if (totalSeconds % 10 === 0) {
          localStorage.setItem(KEYS.time, totalSeconds.toString());
          displayTime();
        }
        if (totalSeconds % 60 === 0) {
          checkTimeMilestones();
          maybeLogSession();
        }
      }
    }

    function displayTime() {
      const hours = (totalSeconds / 3600).toFixed(1);
      document.getElementById('timeDisplay').textContent = hours + 'h';
    }

    function trackActivity() {
      isActive = true;
      lastActivity = Date.now();
    }

    setInterval(() => {
      if (Date.now() - lastActivity > 120000) isActive = false;
    }, 10000);

    ['mousemove', 'keydown', 'click', 'scroll'].forEach(e => {
      document.addEventListener(e, trackActivity);
    });

    setInterval(updateTime, 1000);

    window.addEventListener('beforeunload', () => {
      localStorage.setItem(KEYS.time, totalSeconds.toString());
    });

    // ---- Streak ----
    function updateStreak() {
      const today = new Date().toDateString();
      if (streak.lastDate !== today) {
        const last = new Date(streak.lastDate);
        const now = new Date(today);
        const diff = Math.floor((now - last) / 86400000);
        if (diff === 1) {
          streak.count++;
        } else if (diff > 1) {
          streak.count = 1;
        }
        streak.lastDate = today;
        localStorage.setItem(KEYS.streak, JSON.stringify(streak));
      }
      document.getElementById('streakDisplay').textContent = streak.count;
    }

    // ---- Display stats ----
    function displayStats() {
      displayTime();
      document.getElementById('streakDisplay').textContent = streak.count;
      document.getElementById('sessionsDisplay').textContent = sessions;
      document.getElementById('pointsDisplay').textContent = points;
      document.getElementById('userName').textContent = profile.name;
      const _pnEl = document.getElementById('profileName');
      if (_pnEl) _pnEl.textContent = profile.name;
      document.getElementById('profileDisplayName').textContent = profile.name;
      const _uiEl = document.getElementById('userInitials');
      if (_uiEl) _uiEl.textContent = profile.initials;
      document.getElementById('profileInitials').textContent = profile.initials;
    }

    // ---- Profile modal ----
    const profileModal = document.getElementById('profileModal');

    function openProfileModal() {
      document.getElementById('nameInput').value = profile.name;
      document.getElementById('initialsInput').value = profile.initials;
      profileModal.classList.remove('hidden');
    }

    function closeProfileModal() {
      profileModal.classList.add('hidden');
    }

    document.getElementById('editProfile')?.addEventListener('click', openProfileModal);
    document.getElementById('editProfileBtn').addEventListener('click', openProfileModal);
    document.getElementById('cancelProfile').addEventListener('click', closeProfileModal);

    profileModal.addEventListener('click', (e) => {
      if (e.target === profileModal) closeProfileModal();
    });

    document.getElementById('saveProfile').addEventListener('click', () => {
      profile.name = document.getElementById('nameInput').value || 'Student';
      profile.initials = document.getElementById('initialsInput').value.toUpperCase() || '?';
      localStorage.setItem(KEYS.profile, JSON.stringify(profile));
      displayStats();
      closeProfileModal();
    });

    // ---- Change Password ----
    const passwordModal = document.getElementById('passwordModal');

    document.getElementById('changePasswordBtn').addEventListener('click', () => {
      document.getElementById('currentPasswordInput').value = '';
      document.getElementById('newPasswordInput').value = '';
      document.getElementById('confirmPasswordInput').value = '';
      document.getElementById('passwordError').classList.add('hidden');
      passwordModal.classList.remove('hidden');
    });

    document.getElementById('cancelPassword').addEventListener('click', () => {
      passwordModal.classList.add('hidden');
    });

    passwordModal.addEventListener('click', (e) => {
      if (e.target === passwordModal) passwordModal.classList.add('hidden');
    });

    async function hashPw(pw) {
      const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(pw));
      return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, '0')).join('');
    }

    document.getElementById('savePassword').addEventListener('click', async () => {
      const current = document.getElementById('currentPasswordInput').value;
      const newPw = document.getElementById('newPasswordInput').value;
      const confirm = document.getElementById('confirmPasswordInput').value;
      const errEl = document.getElementById('passwordError');

      errEl.classList.add('hidden');

      if (!current || !newPw || !confirm) {
        errEl.textContent = 'Please fill in all fields.';
        errEl.classList.remove('hidden');
        return;
      }
      if (newPw.length < 6) {
        errEl.textContent = 'New password must be at least 6 characters.';
        errEl.classList.remove('hidden');
        return;
      }
      if (newPw !== confirm) {
        errEl.textContent = 'New passwords do not match.';
        errEl.classList.remove('hidden');
        return;
      }

      const currentHash = await hashPw(current);
      const accounts = JSON.parse(localStorage.getItem('mf_accounts') || '[]');
      const idx = accounts.findIndex(a => a.email === _dashEmail);

      if (idx === -1 || accounts[idx].passwordHash !== currentHash) {
        errEl.textContent = 'Current password is incorrect.';
        errEl.classList.remove('hidden');
        return;
      }

      accounts[idx].passwordHash = await hashPw(newPw);
      localStorage.setItem('mf_accounts', JSON.stringify(accounts));
      passwordModal.classList.add('hidden');
      if (typeof showToast === 'function') showToast('Password updated successfully!', 'success');
    });

    // ---- Settings ----
    document.getElementById('resetStats').addEventListener('click', () => {
      if (confirm('Reset all statistics? This cannot be undone.')) {
        totalSeconds = 0;
        sessions = 0;
        points = 0;
        localStorage.setItem(KEYS.time, '0');
        localStorage.setItem(KEYS.sessions, '0');
        localStorage.setItem(KEYS.points, '0');
        displayStats();
      }
    });

    document.getElementById('clearData').addEventListener('click', () => {
      if (confirm('Delete ALL data including profile? This cannot be undone.')) {
        Object.values(KEYS).forEach(k => localStorage.removeItem(k));
        location.reload();
      }
    });

    // ---- Music Player ----
    const musicToggle = document.getElementById('musicToggle');
    const musicPlayer = document.getElementById('musicPlayer');
    const lofiAudio = document.getElementById('lofiAudio');
    const volumeSlider = document.getElementById('volumeSlider');
    const musicIcon = document.getElementById('musicIcon');
    const musicStatus = document.getElementById('musicStatus');
    let isPlaying = false;

    lofiAudio.volume = 0.5;

    musicToggle.addEventListener('click', () => {
      if (isPlaying) {
        lofiAudio.pause();
        musicStatus.textContent = 'Play';
        musicIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>';
        musicPlayer.classList.add('hidden');
        isPlaying = false;
      } else {
        lofiAudio.play().then(() => {
          musicStatus.textContent = 'Pause';
          musicIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"/>';
          document.getElementById('currentTrack').textContent = 'Lofi Hip Hop Radio ‚Äî 24/7 Study Beats';
          musicPlayer.classList.remove('hidden');
          isPlaying = true;
        }).catch(() => {
          alert('Could not play audio. Please check your connection.');
        });
      }
    });

    volumeSlider.addEventListener('input', (e) => {
      lofiAudio.volume = e.target.value / 100;
    });

    // ---- Activity Chart ----
    const ACTIVITY_COLORS = {
      lesson:  { bg: 'rgba(99,102,241,0.75)',  border: '#6366f1', label: 'Lessons'  },
      session: { bg: 'rgba(139,92,246,0.75)',  border: '#8b5cf6', label: 'Sessions' },
      time:    { bg: 'rgba(6,182,212,0.75)',   border: '#06b6d4', label: 'Time'     },
      points:  { bg: 'rgba(245,158,11,0.75)',  border: '#f59e0b', label: 'Points'   },
      streak:  { bg: 'rgba(16,185,129,0.75)',  border: '#10b981', label: 'Streaks'  },
      profile: { bg: 'rgba(107,114,128,0.75)', border: '#6b7280', label: 'Profile'  },
      music:   { bg: 'rgba(236,72,153,0.75)',  border: '#ec4899', label: 'Music'    },
    };
    const DEFAULT_ACOLOR = { bg: 'rgba(99,102,241,0.75)', border: '#6366f1', label: 'Other' };

    let activityChart = null;
    let chartRange = 7;

    function setChartRange(days) {
      chartRange = days;
      [7, 14, 30].forEach(d => {
        const btn = document.getElementById(`chartView${d}d`);
        if (!btn) return;
        if (d === days) {
          btn.className = 'px-2.5 py-1 rounded-md bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm font-medium transition';
        } else {
          btn.className = 'px-2.5 py-1 rounded-md text-gray-500 dark:text-gray-400 font-medium transition hover:text-gray-700 dark:hover:text-gray-200';
        }
      });
      renderActivity();
    }

    function getDaysArray(numDays) {
      return Array.from({ length: numDays }, (_, i) => {
        const d = new Date();
        d.setDate(d.getDate() - (numDays - 1 - i));
        d.setHours(0, 0, 0, 0);
        return new Date(d);
      });
    }

    function renderActivity() {
      const stored = JSON.parse(localStorage.getItem(KEYS.activity) || '[]');
      activity = stored;

      const days = getDaysArray(chartRange);
      const dayLabels = days.map(d =>
        chartRange <= 7
          ? d.toLocaleDateString('en-US', { weekday: 'short' })
          : d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
      );

      const presentTypes = [...new Set(stored.map(a => a.type))].filter(t => ACTIVITY_COLORS[t] || true);
      const typeOrder = ['lesson', 'session', 'time', 'points', 'streak', 'music', 'profile'];
      const sortedTypes = [
        ...typeOrder.filter(t => presentTypes.includes(t)),
        ...presentTypes.filter(t => !typeOrder.includes(t))
      ];

      const datasets = sortedTypes.map(type => {
        const c = ACTIVITY_COLORS[type] || DEFAULT_ACOLOR;
        return {
          label: c.label,
          data: days.map(day => {
            const next = new Date(day); next.setDate(next.getDate() + 1);
            return stored.filter(a => { const ts = new Date(a.timestamp); return a.type === type && ts >= day && ts < next; }).length;
          }),
          backgroundColor: c.bg,
          borderColor: c.border,
          borderWidth: 1,
          borderRadius: 5,
          borderSkipped: false,
        };
      });

      // Summary stats
      const totalActivities = stored.length;
      const activeDays = new Set(stored.map(a => new Date(a.timestamp).toDateString())).size;
      const dayCounts = days.map((day, i) => {
        const next = new Date(day); next.setDate(next.getDate() + 1);
        return { label: dayLabels[i], count: stored.filter(a => { const ts = new Date(a.timestamp); return ts >= day && ts < next; }).length };
      });
      const best = dayCounts.reduce((b, c) => c.count > b.count ? c : b, { count: 0, label: '‚Äî' });

      document.getElementById('chartTotalActivities').textContent = totalActivities;
      document.getElementById('chartActiveDays').textContent = activeDays;
      document.getElementById('chartBestDay').textContent = best.count > 0 ? best.label : '‚Äî';

      const isEmpty = totalActivities === 0;
      document.getElementById('chartEmptyState').classList.toggle('hidden', !isEmpty);
      document.getElementById('activityChart').style.display = isEmpty ? 'none' : 'block';

      // Legend
      const legendEl = document.getElementById('activityLegend');
      legendEl.innerHTML = sortedTypes.filter(t => stored.some(a => a.type === t)).map(type => {
        const c = ACTIVITY_COLORS[type] || DEFAULT_ACOLOR;
        return `<div class="flex items-center gap-1.5 text-xs text-gray-600 dark:text-gray-400">
          <span class="w-2.5 h-2.5 rounded-sm flex-shrink-0" style="background:${c.border}"></span>${c.label}
        </div>`;
      }).join('');

      if (activityChart) { activityChart.destroy(); activityChart = null; }
      if (isEmpty) return;

      const isDark = document.body.getAttribute('data-theme') === 'dark';
      const gridColor = isDark ? 'rgba(255,255,255,0.07)' : 'rgba(0,0,0,0.06)';
      const tickColor = isDark ? '#9ca3af' : '#6b7280';

      const ctx = document.getElementById('activityChart').getContext('2d');
      activityChart = new Chart(ctx, {
        type: 'bar',
        data: { labels: dayLabels, datasets },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: isDark ? '#1f2937' : '#ffffff',
              titleColor: isDark ? '#f9fafb' : '#111827',
              bodyColor: isDark ? '#d1d5db' : '#374151',
              borderColor: isDark ? '#374151' : '#e5e7eb',
              borderWidth: 1,
              padding: 12,
              callbacks: {
                title: items => items[0].label,
                beforeBody: items => {
                  const total = items.reduce((s, i) => s + i.parsed.y, 0);
                  return total === 1 ? '1 activity' : `${total} activities`;
                },
                label: () => null,
                afterBody: items => {
                  const dayIdx = items[0].dataIndex;
                  const day = days[dayIdx];
                  const next = new Date(day); next.setDate(next.getDate() + 1);
                  const dayActs = stored.filter(a => { const ts = new Date(a.timestamp); return ts >= day && ts < next; });
                  if (!dayActs.length) return [];
                  return dayActs.slice(0, 5).map(a => `‚Ä¢ ${a.text.length > 45 ? a.text.slice(0,42) + '‚Ä¶' : a.text}`);
                }
              }
            }
          },
          scales: {
            x: { stacked: true, grid: { display: false }, ticks: { color: tickColor, font: { size: 11 } }, border: { display: false } },
            y: { stacked: true, beginAtZero: true, ticks: { color: tickColor, font: { size: 11 }, precision: 0, stepSize: 1 }, grid: { color: gridColor }, border: { display: false } }
          },
          animation: { duration: 500, easing: 'easeInOutQuart' },
          interaction: { mode: 'index', intersect: false }
        }
      });
    }

    // ---- Activity Logging Helpers ----
    function logDashboardActivity(type, text) {
      logActivity(type, text);
      renderActivity();
    }

    // ---- Time milestone tracking ----
    const TIME_MILESTONES = [1800, 3600, 7200, 10800]; // 30m, 1h, 2h, 3h
    const reachedMilestones = new Set(
      JSON.parse(localStorage.getItem('mf_milestones_today') || '[]')
    );

    function checkTimeMilestones() {
      const today = new Date().toDateString();
      const savedDay = localStorage.getItem('mf_milestones_day');
      if (savedDay !== today) {
        reachedMilestones.clear();
        localStorage.setItem('mf_milestones_day', today);
        localStorage.setItem('mf_milestones_today', '[]');
      }

      TIME_MILESTONES.forEach(secs => {
        if (totalSeconds >= secs && !reachedMilestones.has(secs)) {
          reachedMilestones.add(secs);
          localStorage.setItem('mf_milestones_today', JSON.stringify([...reachedMilestones]));
          const label = secs < 3600 ? `${secs / 60} minutes` : `${secs / 3600} hour${secs > 3600 ? 's' : ''}`;
          logDashboardActivity('time', `Studied for ${label} today`);

          // Award points for time milestones
          points += 10;
          localStorage.setItem(KEYS.points, points.toString());
          displayStats();
          logDashboardActivity('points', `Earned 10 points for studying ${label}`);
        }
      });
    }

    // ---- Log a session once per day ----
    let sessionLogged = false;
    function maybeLogSession() {
      if (!sessionLogged && totalSeconds >= 60) {
        sessionLogged = true;
        const today = new Date().toDateString();
        if (localStorage.getItem('mf_session_day') !== today) {
          localStorage.setItem('mf_session_day', today);
          sessions++;
          localStorage.setItem(KEYS.sessions, sessions.toString());
          displayStats();
          const startTime = new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
          logDashboardActivity('session', `Study session started at ${startTime}`);
        }
      }
    }

    // ---- Profile save activity ----
    document.getElementById('saveProfile').addEventListener('click', () => {
      logDashboardActivity('profile', `Updated profile name to "${document.getElementById('nameInput').value || 'Student'}"`);
    }, true);

    // ---- Music start activity ----
    let musicLogged = false;
    musicToggle.addEventListener('click', () => {
      if (!isPlaying && !musicLogged) {
        musicLogged = true;
        setTimeout(() => logDashboardActivity('music', 'Started lofi study music'), 300);
      }
    }, true);

    // ---- Streak log on first load ----
    function logStreakIfNew() {
      const today = new Date().toDateString();
      const lastStreakLog = localStorage.getItem('mf_streak_logged_day');
      if (lastStreakLog !== today && streak.count > 0) {
        localStorage.setItem('mf_streak_logged_day', today);
        logDashboardActivity('streak', `Day ${streak.count} streak ‚Äî keep it up!`);
      }
    }

    // ---- Real-time updates via storage events (cross-tab) ----
    window.addEventListener('storage', (e) => {
      if (e.key === KEYS.activity) {
        renderActivity();
      }
      if (e.key === KEYS.time) {
        totalSeconds = parseInt(e.newValue || '0');
        displayTime();
      }
      if (e.key === KEYS.sessions) {
        sessions = parseInt(e.newValue || '0');
        document.getElementById('sessionsDisplay').textContent = sessions;
      }
      if (e.key === KEYS.points) {
        points = parseInt(e.newValue || '0');
        document.getElementById('pointsDisplay').textContent = points;
      }
      if (e.key === KEYS.streak) {
        streak = JSON.parse(e.newValue || '{"count":0,"lastDate":""}');
        document.getElementById('streakDisplay').textContent = streak.count;
      }
    });

    // Same-tab activity events
    window.addEventListener('mf_activity_updated', () => renderActivity());

    // ---- Initialize ----
    updateStreak();
    displayStats();
    displayTime();
    renderActivity();
    logStreakIfNew();

    // Refresh chart every 60 seconds for real-time feel
    setInterval(renderActivity, 60000);
</script>
</body>
</html>
